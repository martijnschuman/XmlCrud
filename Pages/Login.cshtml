<!DOCTYPE html>

@using System.Data;
@using XmlCrud.App_Code;
@using System.IO;

<html>
@RenderPage("~/Shared/_Header.cshtml")
<body>
    
    <div>
        <img src="~/Pages/Login/loginBackground.png" class="loginIMGBackground"/>
        <video class="loginVideoBackground" autoplay muted loop>
            <source src="~/Pages/Login/LoginVideo.webm" type="video/mp4">
            Geen video beschikbaar
        </video>
    </div>
    <div class="loginFormDiv">
        <p id="formTitle">PlayMusic</p>
        <p id="formSubTitle">Inloggen</p>
        @if (IsPost)
        {

            string username = Request.Form["username"];
            string pwd = Request.Form["pwd"];

            string usernameSmartie = "smartie";
            string pwdSmartie = "smartiepwd";

            string usernameSqalley = "sqalley";
            string pwdSqalley = "sqalleypwd";

            int login = 0;
            int AccessLevel = 0;

            <b>Debug only</b>
            <p>In post</p>
            <p>Form username = @Request.Form["username"]</p>
            <p>Form pwd = @Request.Form["pwd"]</p>

            if (((username == usernameSmartie) && (pwd == pwdSmartie)) || ((username == usernameSqalley) && (pwd == pwdSqalley)))
            {
                AccessLevel = 1;
                login = 1;
                Session["login"] = login;
                Session["username"] = username;
                Session["AccessLevel"] = AccessLevel;
                Session["playlist"] = username + "PlayList";

                <div id='formSuccess'>
                    <p>Inloggen gelukt!</p>
                    <p>U wordt automatisch doorgestuurd</p>
                </div>

                //Response.Redirect("../index.cshtml");
                //Debug only
                Response.AddHeader("REFRESH", "5.5;URL=../index.cshtml");
            }
            else
            {
                <div id='formError'>
                    <p>ERROR!</p>
                    <p>Login gegevens incorrect!</p>
                </div>
            }
        }
        <form method="post">
            <div class="formInputContainer">
                <i class="fa fa-user formIcon"></i><input class="InputBox" type="text" placeholder="Gebruikersnaam" name="username" />
            </div>
            <div class="formInputContainer">
                <i class="fa fa-key formIcon"></i><input class="InputBox" type="password" placeholder="Wachwoord" name="pwd" />
            </div>
            <a class="smallLink" id="wachtwoordResetLinkLogin" href="?wachtwoordreset">Wachtwoord vergeten?</a>
            <input type="submit" class="submit" id="loginSubmit" value="Inloggen" />
        </form>
    </div>

</body>
@RenderPage("~/Shared/_Footer.cshtml")
</html>
